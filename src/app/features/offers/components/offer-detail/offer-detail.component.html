<div class="container">
  <button mat-button routerLink="/">
    <mat-icon>arrow_back</mat-icon>
    Back to Marketplace
  </button>

  @if (offer$ | async; as offer) {
    <mat-card class="offer-detail-card">
      <img mat-card-image [src]="offer.imageUrl" [alt]="offer.title" class="detail-image">

      <mat-card-header>
        <mat-card-title>{{ offer.title }}</mat-card-title>
        <mat-card-subtitle class="merchant-subtitle">{{ offer.merchant }}</mat-card-subtitle>
      </mat-card-header>

      <mat-card-content>
        <h3>Description</h3>
        <p>{{ offer.description }}</p>
      </mat-card-content>

      <mat-card-actions>
        <mat-chip>â‚¬{{ offer.price }}</mat-chip>
        <span class="spacer"></span>
        <button mat-icon-button
                [class.voted-up]="offer.userVote === 'up'"
                (click)="vote('up')">
          <mat-icon>thumb_up</mat-icon>
        </button>
        <span class="vote-count">{{ offer.votes }}</span>
        <button mat-icon-button
                [class.voted-down]="offer.userVote === 'down'"
                (click)="vote('down')">
          <mat-icon>thumb_down</mat-icon>
        </button>
      </mat-card-actions>

      <mat-card-actions>
        <button mat-raised-button color="primary" class="purchase-btn" (click)="onPurchase()">
          <mat-icon>shopping_cart</mat-icon>
          Buy Now
        </button>
      </mat-card-actions>
    </mat-card>
  }
</div>
